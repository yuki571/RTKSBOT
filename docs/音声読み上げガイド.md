# 🎤 Discord Bot 音声読み上げ機能ガイド

## 🚀 機能概要

Discord Botにゆっくりボイスでの読み上げ機能を追加しました！
Windows標準音声とVOICEVOX（ゆっくり系音声）に対応しています。

## 📋 利用可能なコマンド

### 基本的な読み上げ
```
/speak text:読み上げたいテキスト
/speak text:こんにちは voice:voicevox speaker:ずんだもん
```

### 音声管理
```
/voicelist              # 利用可能な話者一覧
/voicevox_status        # VOICEVOX接続状態確認
/auto_read enabled:True # 自動読み上げ設定
```

## 🎭 利用可能な話者（VOICEVOX）

### 人気の話者
- **ずんだもん** - 可愛い東北弁の妖精
- **四国めたん** - 関西弁のツンデレ少女  
- **春日部つむぎ** - 大人っぽいお姉さん
- **九州そら** - 九州弁の元気な女の子
- **波音リツ** - 落ち着いた声の青年
- **WhiteCUL** - クールな歌声ライブラリ
- **No.7** - 感情豊かなロボット声
- **櫻歌ミコ** - 巫女さんキャラクター

### 感情表現対応
一部の話者は感情表現に対応：
- **四国めたん**: normal, happy, tsun, sweet, bitter
- **ずんだもん**: normal, sweet, bitter  
- **九州そら**: normal, sweet, whisper, tsun, angry

## ⚙️ VOICEVOX セットアップ

### 1. ダウンロード・インストール
```
setup_voicevox.bat を実行
または
https://voicevox.hiroshiba.jp/ から直接ダウンロード
```

### 2. API設定
1. VOICEVOXアプリを起動
2. 設定（歯車アイコン）→「APIサーバー」タブ
3. 「APIサーバーを有効にする」にチェック
4. ポート: 50021（デフォルト）

### 3. 接続確認
```
/voicevox_status
```

## 🔧 自動読み上げ機能

特定のチャンネルでメッセージを自動読み上げできます。

### 設定例
```
/auto_read enabled:True voice:voicevox speaker:ずんだもん max_length:50
```

### 設定項目
- **enabled**: 有効/無効
- **voice**: sapi（Windows音声）または voicevox
- **speaker**: 話者名（VOICEVOXのみ）
- **max_length**: 最大読み上げ文字数（10-200）

### 自動読み上げ制限
- URL、メンション、絵文字は読み上げしない
- 指定した最大文字数を超える場合は「...」で省略
- ボットが音楽再生中は読み上げしない

## 🎵 音楽機能との連携

### 優先順位
1. 音楽再生（高優先度）
2. 手動読み上げ（/speak）
3. 自動読み上げ（低優先度）

### 使い分け
- **音楽再生中**: 読み上げは一時停止
- **読み上げ中**: 新しい音楽で上書き可能
- **自動読み上げ**: 他の音声再生を邪魔しない

## 📊 システム要件

### 必須
- Windows 10/11
- FFmpeg（音楽機能に必要）
- Python環境（仮想環境）

### VOICEVOX使用時
- VOICEVOX アプリケーション
- メモリ: 2GB以上推奨
- ストレージ: 1GB以上の空き容量

## 🔍 トラブルシューティング

### よくある問題

#### 「VOICEVOX not available」エラー
```
解決方法:
1. VOICEVOXアプリが起動しているか確認
2. APIサーバーが有効化されているか確認
3. /voicevox_status で接続状態を確認
4. Windows ファイアウォール設定を確認
```

#### 音声が再生されない
```
解決方法:
1. ボイスチャンネルに参加
2. /join でボットをボイスチャンネルに参加させる
3. FFmpegが正しくインストールされているか確認
4. Discord の音声権限を確認
```

#### 読み上げが遅い・重い
```
解決方法:
1. 読み上げ文字数を制限（50文字以下推奨）
2. PCのメモリ使用量を確認
3. VOICEVOXの設定でGPU使用を有効化
4. 同時に複数の音声生成を避ける
```

#### Windows音声が日本語でない
```
解決方法:
1. Windows設定 → 時刻と言語 → 音声認識
2. 日本語音声パックをインストール
3. または VOICEVOX を使用
```

## 💡 使用のヒント

### 効果的な使い方
- **短文での読み上げ**: 50文字以内が聞き取りやすい
- **話者の使い分け**: 状況に応じて話者を変更
- **自動読み上げ**: 専用チャンネルでの使用推奨
- **感情表現**: 話者の感情設定を活用

### パフォーマンス最適化
- VOICEVOXのGPU使用を有効化
- 読み上げ頻度を調整
- 不要な自動読み上げを無効化
- 定期的に一時ファイルをクリーンアップ

## 📞 サポート情報

### コマンド一覧確認
```
/help        # 全コマンド表示
/voicelist   # 音声話者一覧
```

### ログ確認
```
bot_log_YYYYMMDD.log  # エラーログ確認
```

### 設定リセット
```
/auto_read enabled:False  # 自動読み上げ無効化
```

---

**🎉 楽しい音声読み上げライフをお楽しみください！**